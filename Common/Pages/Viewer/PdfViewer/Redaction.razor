@page "/pdf-viewer/redaction"

@using Syncfusion.Blazor.SfPdfViewer
@using Syncfusion.Blazor.Buttons
@inject IJSRuntime JSRuntime
@*Hidden:Lines*@
@inherits SampleBaseComponent
@inject NavigationManager NavigationManager
@*End:Hidden*@
<SampleDescription>
    <p>This sample demonstrates redaction annotations in the PDF Viewer, which allow you to permanently remove sensitive or confidential content from PDF documents. Use the built-in redaction workflow to mark, apply, and save changes securely, all within the viewer interface.</p>
</SampleDescription>
<ActionDescription>
    <p>This sample illustrates how to perform redaction using the PDF Viewer. Select regions on one or <a target="_blank" href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.SfPdfViewer.PdfViewerBase.html#Syncfusion_Blazor_SfPdfViewer_PdfViewerBase_AddPageRedactionsAsync_System_Collections_Generic_List_System_Int32__" aria-label="Navigate to the AddPageRedactionsAsync method reference for PdfViewerBase">multiple pages</a>, customize the redaction properties, and then apply them to permanently remove the marked content. You can invoke redaction through the API using <a target="_blank" href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.SfPdfViewer.PdfViewerBase.html#Syncfusion_Blazor_SfPdfViewer_PdfViewerBase_RedactAsync" aria-label="Navigate to the RedactAsync method reference for PdfViewerBase">RedactAsync</a>. After applying redaction, the updated document is reloaded into the viewer and can be saved or reopened for further use.</p>
    <br />
    
    <p>More information about the <strong>SfPdfViewer</strong> redaction feature can be found in this <a target="_blank" href="https://help.syncfusion.com/document-processing/pdf/pdf-viewer/blazor/annotation/redaction-annotation" aria-label="Navigate to the documentation for Redaction annotations in SfPdfViewer component">documentation section</a>.</p>
</ActionDescription>

<div class="control-section">
    <SfPdfViewer2 @ref="SfPdfViewer2" Height="640px" Width="100%" DocumentPath="@DocumentPath">
        <PdfViewerToolbarSettings ToolbarItems="ToolbarItems" MobileToolbarItems="MobileToolbarItems"></PdfViewerToolbarSettings>
        <PdfViewerEvents DocumentLoaded="DocumentLoaded"></PdfViewerEvents>
    </SfPdfViewer2> 
</div>

@code {
    
    SfPdfViewer2? SfPdfViewer2;
    bool redactionToolbar;
    private string DocumentPath { get; set; } = string.Empty;
    public List<ToolbarItem>? ToolbarItems { get; set; }
    public List<MobileToolbarItem>? MobileToolbarItems { get; set; }


    private void DocumentLoaded(LoadEventArgs args)
    {
        redactionToolbar = true;
        SfPdfViewer2?.ShowRedactionToolbar(redactionToolbar);
    }

    protected override void OnInitialized()
    {

        string fileDataPath = NavigationManager.BaseUri + SampleService.WebAssetsPath;
@*Server:Block*@
#if !WASM
        //Sets the PDF document path for initial loading.
        DocumentPath = "wwwroot/data/pdfviewer/redaction.pdf";
#endif
@*End:Server*@

@*WebAssembly:Block*@
#if WASM
        //Sets the PDF document path for initial loading.   
        DocumentPath= fileDataPath + "data/pdfviewer/redaction.pdf";
#endif
@*End:WebAssembly*@
        ToolbarItems = new List<ToolbarItem>(){
        ToolbarItem.OpenOption,
        ToolbarItem.PageNavigationTool,
        ToolbarItem.MagnificationTool,
        ToolbarItem.SelectionTool,
        ToolbarItem.PanTool,
        ToolbarItem.UndoRedoTool,
        ToolbarItem.CommentTool,
        ToolbarItem.SubmitForm,
        ToolbarItem.SearchOption,
        ToolbarItem.AnnotationEditTool,
        ToolbarItem.Redaction,
        ToolbarItem.FormDesigner,
        ToolbarItem.PrintOption,
        ToolbarItem.DownloadOption
        };
        MobileToolbarItems = new List<MobileToolbarItem>()
        {
            MobileToolbarItem.Open,
            MobileToolbarItem.UndoRedo,
            MobileToolbarItem.EditAnnotation,
            MobileToolbarItem.Redaction,
            MobileToolbarItem.FormDesigner,
            MobileToolbarItem.Search
        };

    }
}
